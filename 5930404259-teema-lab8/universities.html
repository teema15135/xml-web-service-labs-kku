<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">

  <title>Universities</title>

  <style>
    html,
    pre {
      font-family: sans-serif;
    }

    body {
      width: 500px;
      margin: 0 auto;
      background-color: #ccc;
    }

    pre {
      line-height: 1.5;
      letter-spacing: 0.05rem;
      padding: 1rem;
      background-color: white;
    }

    label {
      width: 200px;
      margin-right: 33px;
    }

    select {
      width: 350px;
      padding: 5px;
    }
  </style>
  <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
  <h1>Some universities</h1>

  <form>
    <label for="verse-choose">Choose a university</label><br/>
    <select id="verse-choose" name="verse-choose">
      <option>Carnegie Mellon University</option>
      <option>University of Michigan</option>
      <option>Khon Kaen University</option>
    </select>
  </form>

  <h2>An image of selected university</h2>


  <script>

    var request = new XMLHttpRequest;
    var requestMapJson = new XMLHttpRequest;
    var mapObj;
    var image;
    requestMapJson.open('GET', 'unames.json');
    requestMapJson.responseType = 'json';
    requestMapJson.send();

    var selBox = document.querySelector('select');

    requestMapJson.onload = function () {
      mapObj = requestMapJson.response;

      image = document.createElement('img');
      image.style.width = '400px';
      image.style.height = 'auto';
      image.style.boxShadow = 'border-box';
      document.body.appendChild(image);

      updateDisplay(selBox.value);
    }

    selBox.onchange = function () {
      var choosen = selBox.value;
      updateDisplay(choosen);
    }

    function updateDisplay(choosen) {
      var mappedURL = mapUnivNameImage(choosen);
      displayImage(mappedURL);
    }

    function displayImage(imgURL) {
      image.setAttribute('src', imgURL);
    }

    function mapUnivNameImage(uName) {
      return mapObj[uName];
    }

    request.onload = function () {
      var textResp = request.response;
      document.querySelector('pre').innerHTML = textResp;
    }

  </script>
</body>

</html>